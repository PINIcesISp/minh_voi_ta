// ==UserScript==
// @name         n-e-w-t-o-k-i
// @namespace    https://github.com/PINIcesISp/minh_voi_ta/raw/main/n-e-w-t-o-k-i.user.js
// @version      2024.07.23
// @description  down n-e-w-t-o-k-i
// @author       You
// @include      /^https?://newtoki\d+\.com/webtoon/*/*/
// @icon         https://www.google.com/s2/favicons?sz=64&domain=newtoki346.com
// @grant        GM_download
// @grant        GM_info
// @downloadURL  https://github.com/PINIcesISp/minh_voi_ta/raw/main/n-e-w-t-o-k-i.user.js
// @updateURL    https://github.com/PINIcesISp/minh_voi_ta/raw/main/n-e-w-t-o-k-i.meta.js
// ==/UserScript==

const a0_0x565a35=a0_0x5a25;(function(_0x2311bd,_0x2374c3){const _0x1282b3=a0_0x5a25,_0x1dda7f=_0x2311bd();while(!![]){try{const _0x52bfdb=-parseInt(_0x1282b3(0x145))/0x1+parseInt(_0x1282b3(0x149))/0x2*(parseInt(_0x1282b3(0x156))/0x3)+-parseInt(_0x1282b3(0x169))/0x4*(-parseInt(_0x1282b3(0x182))/0x5)+parseInt(_0x1282b3(0x15c))/0x6*(-parseInt(_0x1282b3(0x172))/0x7)+parseInt(_0x1282b3(0x167))/0x8+-parseInt(_0x1282b3(0x175))/0x9*(parseInt(_0x1282b3(0x144))/0xa)+parseInt(_0x1282b3(0x153))/0xb;if(_0x52bfdb===_0x2374c3)break;else _0x1dda7f['push'](_0x1dda7f['shift']());}catch(_0x2b7942){_0x1dda7f['push'](_0x1dda7f['shift']());}}}(a0_0x4367,0xbe9d7));function a0_0x4367(){const _0x3c3eaa=['href','pointer','absolute','7091EmpOWK','newtoki','5rem','2504997dfBvlq','style','link','position','image/webp','.jpg','splice','.webp','0.5rem','parseInt','image/jpeg','padStart','arrayBuffer','265qGNBwM','className','left','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','image/png','length','fromCodePoint','head','#heartbeat','querySelector','rel','firstChild','slice','click','cursor','flex','30GRmMuw','821324mRdyIy','insertBefore','1.5rem','stylesheet','167026jMmjVO','innerHTML','heartbeat','.toon-title','createObjectURL','\x20/\x20','div','tai-ve','textContent','getUint32','9629818FJLuvx','gap','filter','48gSOEzz','setAttribute','50vw','body','match','appendChild','1830FlumOy','src','89504e47','addEventListener','zIndex','.status-num','https://fonts.googleapis.com/css2?family=Acme&display=swap','createElement','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20','all','1000000','2348128DCDFnh','display','18180SfigPH','map','downloadMode','center','toString','status'];a0_0x4367=function(){return _0x3c3eaa;};return a0_0x4367();}let downloading_current=0x0,downloading_total=0x0;const downloadMode=GM_info[a0_0x565a35(0x16b)];function sleep(_0x163dd9){return new Promise(_0x115d74=>setTimeout(_0x115d74,_0x163dd9));}const download_not_encrypted=async(_0x3763c0,_0x3833f8,_0x495d92)=>{const _0x54c32e=a0_0x565a35,_0x36f9d8=await fetch(_0x3763c0),_0x25630d=await _0x36f9d8[_0x54c32e(0x181)]();let _0x5e76e9=(''+(_0x3833f8+0x1))[_0x54c32e(0x180)](0x3,'0');downloadMode==='browser'&&(_0x5e76e9=_0x495d92+_0x5e76e9);const _0x560b6e=new DataView(_0x25630d),_0x122e41=_0x560b6e[_0x54c32e(0x152)](0x0,![])[_0x54c32e(0x16d)](0x10);if(_0x122e41==='52494646'){const _0x5240a6=new Blob([_0x25630d],{'type':_0x54c32e(0x179)}),_0xf23867=URL['createObjectURL'](_0x5240a6);GM_download({'url':_0xf23867,'name':_0x5e76e9+_0x54c32e(0x17c)}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{if(_0x122e41===_0x54c32e(0x15e)){const _0x36d3eb=new Blob([_0x25630d],{'type':_0x54c32e(0x186)}),_0x5a3023=URL[_0x54c32e(0x14d)](_0x36d3eb);GM_download({'url':_0x5a3023,'name':_0x5e76e9+'.png'}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{const _0x1b96f2=new Blob([_0x25630d],{'type':_0x54c32e(0x17f)}),_0x32d9b1=URL[_0x54c32e(0x14d)](_0x1b96f2);GM_download({'url':_0x32d9b1,'name':_0x5e76e9+_0x54c32e(0x17a)}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}}};function update_status(){const _0x30c7d9=a0_0x565a35;document[_0x30c7d9(0x18b)]('.status-num')['style']['display']='flex',document['querySelector'](_0x30c7d9(0x161))['style']['alignItems']='center',document[_0x30c7d9(0x18b)]('.status-num')[_0x30c7d9(0x14a)]=downloading_current+'\x20/\x20'+downloading_total;}function create_status_box(){const _0x5c5ae4=a0_0x565a35;let _0x59babe=document[_0x5c5ae4(0x163)]('div');return _0x59babe[_0x5c5ae4(0x183)]='status-num',_0x59babe[_0x5c5ae4(0x151)]=downloading_current+_0x5c5ae4(0x14e)+downloading_total,_0x59babe;}function create_download_icon(){const _0x45473f=a0_0x565a35;let _0x457e36=document[_0x45473f(0x163)](_0x45473f(0x14f)),_0x59c59c=document[_0x45473f(0x163)]('img');_0x59c59c[_0x45473f(0x183)]=_0x45473f(0x150),_0x59c59c[_0x45473f(0x157)](_0x45473f(0x15d),_0x45473f(0x185)),_0x59c59c[_0x45473f(0x176)]['width']=_0x45473f(0x174),_0x59c59c[_0x45473f(0x176)][_0x45473f(0x142)]=_0x45473f(0x170),_0x457e36[_0x45473f(0x15b)](_0x59c59c);let _0x38a56d=document[_0x45473f(0x163)](_0x45473f(0x177));_0x38a56d[_0x45473f(0x18c)]=_0x45473f(0x148),_0x38a56d[_0x45473f(0x16f)]=_0x45473f(0x162),document['getElementsByTagName']('head')[0x0][_0x45473f(0x15b)](_0x38a56d);let _0x18003b=document[_0x45473f(0x163)](_0x45473f(0x14f));_0x18003b[_0x45473f(0x183)]=_0x45473f(0x16e),_0x18003b['style'][_0x45473f(0x168)]=_0x45473f(0x143),_0x18003b[_0x45473f(0x176)]['justifyContent']='center',_0x18003b[_0x45473f(0x176)]['alignItems']=_0x45473f(0x16c),_0x18003b['style'][_0x45473f(0x154)]=_0x45473f(0x147),_0x18003b['style'][_0x45473f(0x178)]=_0x45473f(0x171),_0x18003b[_0x45473f(0x176)][_0x45473f(0x160)]=_0x45473f(0x166),_0x18003b['style']['top']=_0x45473f(0x17d),_0x18003b['style'][_0x45473f(0x184)]=_0x45473f(0x158),_0x18003b[_0x45473f(0x176)]['transform']='translate(-50%)';let _0x5c899d=create_status_box();const _0x64af07=document[_0x45473f(0x163)]('style');_0x64af07[_0x45473f(0x151)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x205rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.5rem\x200.6rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x204rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',document[_0x45473f(0x189)][_0x45473f(0x15b)](_0x64af07),_0x18003b[_0x45473f(0x15b)](_0x457e36),_0x18003b[_0x45473f(0x15b)](_0x5c899d);let _0x87ba7f=document[_0x45473f(0x18b)](_0x45473f(0x159)),_0x2621e1=_0x87ba7f[_0x45473f(0x13f)];return _0x87ba7f[_0x45473f(0x146)](_0x18003b,_0x2621e1),_0x18003b;}const throttlePromises=async(_0x1f6ef8,_0x33392f)=>{const _0x49fbb7=a0_0x565a35;while(_0x1f6ef8['length']>0x0){await Promise[_0x49fbb7(0x165)](_0x1f6ef8[_0x49fbb7(0x17b)](0x0,_0x33392f)['map'](_0x209d0e=>_0x209d0e())),await sleep(0xc8);}},on_heartbeat_css=()=>{const _0x286896=a0_0x565a35;let _0x3ffe90=document[_0x286896(0x18b)](_0x286896(0x18a));!_0x3ffe90&&(_0x3ffe90=document[_0x286896(0x163)](_0x286896(0x176)),_0x3ffe90[_0x286896(0x157)]('id',_0x286896(0x14b)),document[_0x286896(0x189)][_0x286896(0x15b)](_0x3ffe90)),_0x3ffe90[_0x286896(0x151)]=_0x286896(0x164);},off_heartbeat_css=()=>{const _0x11d3e0=a0_0x565a35,_0x27b2fe=document[_0x11d3e0(0x18b)](_0x11d3e0(0x18a));_0x27b2fe['textContent']='';},htmlEncoder=_0x2ae08a=>{const _0x5cb7e0=a0_0x565a35;let _0x39fb57='';for(let _0x34d99c=0x0;_0x34d99c<_0x2ae08a['length'];_0x34d99c+=0x3){_0x39fb57+=String[_0x5cb7e0(0x188)](Number[_0x5cb7e0(0x17e)](_0x2ae08a[_0x5cb7e0(0x140)](_0x34d99c,_0x34d99c+0x2),0x10));}return _0x39fb57;};function a0_0x5a25(_0x12ed58,_0x52bfeb){const _0x43679c=a0_0x4367();return a0_0x5a25=function(_0x5a25a0,_0x3221c1){_0x5a25a0=_0x5a25a0-0x13f;let _0x5d8c1c=_0x43679c[_0x5a25a0];return _0x5d8c1c;},a0_0x5a25(_0x12ed58,_0x52bfeb);}((async()=>{const _0x2dbe3b=a0_0x565a35,_0x8c4bb6=htmlEncoder(html_data),_0x3f77f7=_0x8c4bb6[_0x2dbe3b(0x15a)](/src="\/img\/loading-image.gif" data-.+?="(.+?)"/g)[_0x2dbe3b(0x16a)](_0x4f95fb=>_0x4f95fb[_0x2dbe3b(0x15a)](/data-.+?="(.+?)"/)[0x1])[_0x2dbe3b(0x155)](_0x2b728e=>_0x2b728e['includes'](_0x2dbe3b(0x173)));let _0x527a98=document[_0x2dbe3b(0x18b)](_0x2dbe3b(0x14c))[_0x2dbe3b(0x13f)][_0x2dbe3b(0x151)];_0x527a98?_0x527a98=_0x527a98+'/':_0x527a98='';if(_0x3f77f7[_0x2dbe3b(0x187)]>0x0){downloading_total=_0x3f77f7[_0x2dbe3b(0x187)];const _0x238f9d=create_download_icon();_0x238f9d[_0x2dbe3b(0x15f)](_0x2dbe3b(0x141),async()=>{const _0x10f5b4=_0x2dbe3b;on_heartbeat_css(),downloading_current=0x0;let _0x367ef6;_0x367ef6=_0x3f77f7[_0x10f5b4(0x16a)]((_0x11ba6,_0x403d17)=>()=>download_not_encrypted(_0x11ba6,_0x403d17,_0x527a98)),await throttlePromises(_0x367ef6,0x2);});}})());